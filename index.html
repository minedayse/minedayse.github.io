<!DOCTYPE html>
<html>

<head>

<title> PDI com Dayse e Yasmin </title>

</head>

<body style="height:100%; width:80%">

<font size = +2 face = "Arial" >

<H1> <center> Exercicios de Processamento Digital de Imagens com OpenCV </center> </H1>

Alunas: Dayse e Yasmin. <P>
Professor: Agostinho Brito. <P>

<H2> <center> Exercicio 1 - Manipulacao de Pixels </center> </H2>

Este exercicio tem o proposito de ajudar no entendimento sobre manipulacao de imagens, apos um estudo teorico sobre componentes de uma imagem e maneiras de manipula-la. 
Para receber a imagem, fazer alteracoes nela, criar uma nova e exibi-la, sera utilizado o conjunto de bibliotecas OpenCV. O sistema operacional presente durante esse processo foi o Ubuntu. <P>
O exercicio consiste em, dado dois valores P1 e P2, transformar uma imagem de forma que a regiao presente entre P1 e P2 conterao o negativo da mesma e o resto se mantera. Para isso, P1 e P2 devem ser valores presentes no conjunto de pixels da imagem e o resultado da transformacao se dara numa regiao com formato retangular. <P>

<H3> <center> Teoria </center> </H3>

A ideia para a execucao desse exercicio consistiu em seu principio de fazer o upload de uma imagem em grayscale (tons de cinza) e ler os valores P1 e P2. Em seguida, deve-se criar uma regiao variando do ponto x do pixel P1 ao ponto x do pixel P2 e do ponto y de P1 ao ponto y de P2. Dentro dessa regiao, uma transformacao sera feita, <P>
Para finalizar, deve-se gerar uma imagem nova e exibi-la. <P>

<H3> <center> Funcoes </center> </H3>

As funcoes fundamentais para a execucao dessa atividade e o que elas representam sao: <P>

<UL>
<LI> Mat: cria uma matriz que armazenara os dados dos pixels das imagens.
<LI> imread: le uma imagem e armazena numa matriz.
<LI> namedWindow: cria uma janela.
<LI> imagem.at<uchar>(x, y): representa o valor do pixel de posicao x e y da matriz imagem.
<LI> imshow(,): mostra na janela uma imagem.
<LI> imwrite(,): cria um arquivo com uma matriz de imagem contida no programa.
</UL>

<H3> <center> Imagem </center> </H3>

Para a realizacao do exercicio, foi utilizada a seguinte imagem como base: <P>

<center>
<IMG SRC = "imagem.png" width=35% height = 35% alt="Exemplo 1"> 

<H3> Codigo comentado </H3>
</center>
<font size = +1 face = "helvetica"> 

<I>
#include <iostream>
<BR>#include <cv.h>
<BR>#include <highgui.h>
<P>
using namespace cv;
<BR>using namespace std;
<P>
int main(int, char**){
<BR>  Mat image;
<P>
  image= imread("imagem.png",CV_LOAD_IMAGE_GRAYSCALE);
<P>
  if(!image.data){
<BR>    cout << "Erro: Nao foi possivel carregar a imagem." << endl;
<BR>  }
<P>
  else{
<BR>    namedWindow("Janela",WINDOW_AUTOSIZE);
<P>
    int x1, x2, y1, y2;
<P>
    cout << "Ponto 1" << endl;
<BR>    cout << "X: ";
<BR>    cin >> x1;
<BR>    cout << "Y: ";
<BR>    cin >> y1;
<BR>    cout << "Ponto 2" << endl;
<BR>    cout << "X: ";
<BR>    cin >> x2;
<BR>    cout << "Y: ";
<BR>    cin >> y2; 
<P>
// Negativar regiao entre os pontos 1 e 2
<BR>    for(int i=x1;i<x2;i++){
<BR>      for(int j=y1;j<y2;j++){
<BR>        image.at<uchar>(i,j)=255 - image.at<uchar>(i,j);
<BR>      }
<BR>    }
<P>  
    imshow("Janela", image);  
<BR>    imwrite("imagemnegativa.png", image);
<BR>    waitKey();
<BR>    }
<P>
  return 0;
<BR>}

</I>
</font>

<H3> <center> Resultados </center> </H3>

Apos a execucao do codigo atraves dos comandos "make negativo" e "./negativo" no prompt de comando, o programa pede os valores de P1 e P2, sendo primeiro o "x" e depois o "y" de cada ponto. Como exemplo, utilizou-se P1= (100, 100) e P2= (400, 400). O resultado do programa pode ser visto a seguir:
<P>
<center>
<IMG SRC = "imagemnegativa.png" width=35% height = 35% alt="Exercicio 1"> 
<P>

<H2> Exercicio 2 - Troca de Regioes </H2>
</center>

Com este exercicio, ve-se o resultado do aprendizado base com relacao a manipulacao de imagens. Para ele, sera necessario conceitos basicos de separacao de regioes e programacao. Para a execucao dessa proposta, ainda sera utilizado o conjunto de bibliotecas OpenCV, de forma a receber a imagem, fazer alteracoes nela, criar uma nova e exibi-la. O sistema operacional presente durante esse processo foi o Ubuntu. <P>
O exercicio consiste em, dado uma imagem, dividi-la em quatro regioes e trocar as posicoes delas. A regiao superior esquerda deve trocar de lugar com a inferior direita e a regiao superior direita deve ser trocada com a inferior esquerda. <P>

<H3> <center> Teoria </center> </H3>

A ideia para o funcionamento desse exercicio comecou com o upload de uma imagem escolhida previamente. Em seguida, para nao gastar mais linhas, deve-se definir logo a imagem nova e definir o valor de seus pixels de acordo com as regioes da imagem original.
A separaracao das regioes escolhidas se dara variando do ponto inicial a metade do comprimento da imagem e a metade de sua altura para a regiao superior esquerda. <P>
A regiao superior esqueda (1) sera definida dos valores iniciais de x e y ate a metade da altura e a metade da largura da imagem, respectivamente. A regiao superior direita (2) sera definida do ponto inicial ate a metade da altura para os valores de x e da metade do comprimento ate o final dele para os valores de y. A regiao inferior esquerda (3) sera definida da metade da altura ate o final dela para os valores de x e do ponto inicial ate a metade do comprimento para os valores de y. Seguindo a mesma logica, a ultima regiao (4) sera composta pelo que sobrou. <P>
A troca pode ocorrer de tres formas: entre as regioes 1-2 e 3-4 (troca na horizontal), entre as regioes 1-3 e 2-4 (troca na vertical) ou entre as regioes 1-4 e 2-3. A logica dela consiste em armazenar os dados da primeira regiao numa variavel, depois modificar essa regiao com os dados da desejada e em seguida modificar os dados da desejada utilizando o que foi armazenado na variavel. Para finalizar, deve-se exibir na tela a nova imagem. <P>

<H3> <center> Funcoes </center> </H3>

As funcoes adicionais essenciais para a execucao dessa atividade e o que elas representam sao: <P>

<UL>
<LI> rand: gera um numero aleatorio.
<LI> imagem.size().width: retorna o valor da largura da imagem.
<LI> imagem.size().height: retorna o valor da altura da imagem.
</UL>

<H3> <center> Imagem </center> </H3>

Para a realizacao do exercicio, foi utilizada a mesma imagem do exercicio anterior como base. Ela esta mostrada a seguir: <P>
<center>
<IMG SRC = "imagem.png" width=35% height = 35% alt="Exercicio 1">

<H3> Codigo comentado </H3>
</center>
<font size = +1 face = "helvetica"> 

<I>

#include <iostream>
<BR>#include <cv.h>
<BR>#include <highgui.h>
<P>
using namespace cv;
<BR>using namespace std;
<P>
int main(int, char**){
<P>
srand(time(NULL));
<P>
  Mat image;
<BR>  int width, height;
<BR>  int t;// Troca (regioes)
<BR>  int aux1, aux2; // Auxiliar
<P>
  image= imread("imagem.png",CV_LOAD_IMAGE_GRAYSCALE);
<P>
  if(!image.data){
<BR>    cout << "Erro: Nao foi possivel carregar a imagem." << endl;
<BR>  }
<P>
  else{
<BR>  namedWindow("Janela",WINDOW_AUTOSIZE);
<P>
  width=image.size().width;
<BR>  height=image.size().height;
<P> 
// Translacao
<BR>  t = rand() % 3; // Troca aleatoria
<BR>  if(t==0){ // 1-2, 3-4
<BR>    for(int i=0;i<height/2;i++){
<BR>      for(int j=0;j<width/2;j++){
<BR>        aux1 = image.at<uchar>(i,j);
<BR>        image.at<uchar>(i,j) = image.at<uchar>(i,j + width/2);
<BR>        image.at<uchar>(i,j + width/2) = aux1;
<BR>        aux2 = image.at<uchar>(i + height/2,j);
<BR>        image.at<uchar>(i + height/2,j) = image.at<uchar>(i + height/2,j + width/2);
<BR>        image.at<uchar>(i + height/2,j + width/2) = aux2;
<BR>      }
<BR>    }
<BR>  }
<BR>  else if(t==1){ // 1-3, 2-4
<BR>    for(int i=0;i<height/2;i++){
<BR>      for(int j=0;j<width/2;j++){
<BR>        aux1 = image.at<uchar>(i,j);
<BR>        image.at<uchar>(i,j) = image.at<uchar>(i + height/2,j);
<BR>        image.at<uchar>(i + height/2,j) = aux1;
<BR>        aux2 = image.at<uchar>(i,j + width/2);
<BR>        image.at<uchar>(i,j + width/2) = image.at<uchar>(i + height/2,j + width/2);
<BR>        image.at<uchar>(i + height/2,j + width/2) = aux2;
<BR>      }
<BR>     }
<BR>  } 
<BR>  else{ // 1-4, 2-3
<BR>    for(int i=0;i<height/2;i++){
<BR>      for(int j=0;j<width/2;j++){
<BR>        aux1 = image.at<uchar>(i,j);
<BR>        image.at<uchar>(i,j) = image.at<uchar>(i + height/2,j + width/2);
<BR>        image.at<uchar>(i + height/2,j + width/2) = aux1;
<BR>        aux2 = image.at<uchar>(i,j + width/2);
<BR>        image.at<uchar>(i,j + width/2) = image.at<uchar>(i + height/2,j);
<BR>        image.at<uchar>(i + height/2,j) = aux2;
<BR>      }
<BR>     }
<BR>  }
<BR>// FimTranslacao
<P>  
  imshow("Janela", image);  
<BR>  imwrite("Exemplo2.png", image);
<BR>  waitKey();
<BR>  }
<P>
  return 0;
<BR>}

</I>
</font>

<H3> <center> Resultados </center> </H3>

Para obter resultados, o codigo correspondente, com o nome "trocaderegioes.cpp", foi executado pelo prompt de comando. Esse exercicio foi executado diversas vezes, pois a troca de regioes esta aleatoria e assim foi possivel verificar todas as possibilidades, que estao mostradas a seguir: <P>
<center>
<BR>Troca 1-2, 3-4<P>
<IMG SRC = "Exemplo21.png" width=35% height = 35% alt="Exercicio 1"> 
<BR>Troca 1-3, 2-4<P>
<IMG SRC = "Exemplo22.png" width=35% height = 35% alt="Exercicio 1"> 
<BR>Troca 1-4, 2-3<P>
<IMG SRC = "Exemplo23.png" width=35% height = 35% alt="Exercicio 1"> 

</font>
</body>


</center>
</html>
